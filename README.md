![image](ClearBox.png)

>[!CAUTION]
>您当前正处于 **Debug** 分支，此分支会及时更新最新代码，但风险很大，包括但不限于大幅功能变动/可能的 **bug** 、问题，这些 **bug** 有可能会导致您的数据损失，非尝鲜不建议使用

   # 什么是 **ClearBox** ？

**ClearBox** 是一个深度快速清理模块，可为您的设备一键删除所有软件缓存、安装包、压缩包、垃圾、空文件夹，阻止缓存、文件归类，阻止软件更新/安装和定期优化/清理、文件归类功能（无后台），支持添加自定义清理规则和文件清理/整理归类

执行所用时间相对市面上普通清理软件来说快如✈️

__支持任意终端/软件调用 **bin** 命令`ClearBox -c`执行一键优化清理__

__兼容 **Magisk、Apatch、KernelSU** 及其类似分支管理器__


   ## 操作方式：

> ：终端以 **root** 身份键入 **`ClearBox`** 进入功能菜单

> ：安装使用模块 **ClearBox** 软件（会在模块安装时询问

   ## 简介功能：
   
### **1**：一键优化清理

进行快速一键优化/清理，效果等同于定期优化。包括缓存清理、垃圾清理，快速磁盘 **GC** 等，另外根据模块设置还可运行文件清理/归类





### **2**：清理/干掉自定义目录

这项功能是规则清理功能，目前处于半开发状态，目前可在 **`/data/adb/wipe_cache/清理配置/`** 目录下自行添加清理规则。

配置方法：

规则使用文本格式，可在规则文件开头第一行增加 **`@/xxx`** (以根目录开始) 指定初始目录，不同规则文件独立。

参数：

填写 **`KILL=`** （某目录）
干掉该目录

填写 **`CLEAR=`** （某目录）
清空该目录

如果某规则文件规则存在不指定参数，并直接使用硬编码以根目录 **`/xxx`** 的规则会导致触发安全警告并全局退出规则清理





### **3**：清除垃圾文件及空文件夹

清理内/外部储存空文件夹、多媒体缓存、软件缓存等





### **4**：清空所有软件缓存

如名所示，支持 **SD** 拓展卡软件缓存清理





### **5**：深度文件清理

文件清理功能，自带部分清理配置，支持自定义文件格式配置。

配置方法：

配置目录： **`/data/adb/wipe-cache/文件格式配置`**

配置方式：在配置文件目录新建 **conf** 文档文件，该文件名称会显示在清理页面当作对应清理项名称，将自定义文件后缀填入该文件，使用空格 分隔文件后缀。

在文件后缀前加 **`#`** 即可屏蔽该格式，栗：**apk = #apk**，此法也可用于注释文本，但请注意配置以空格分隔

软件/终端清理页面会根据配置文件动态构建

范围：文件清理，及后面会讲到的文件归类





### **6**：软件规则清理

规则清理功能之一，用于根据规则对软件内部私有目录进行清理（正在开发完善功能

配置方法：

配置目录： **`/data/adb/wipe-cache/清理规则`**

配置方式：在配置文件目录新建 **conf** 文件，文件名称随意但不得包含特殊符号、空格等。
第一行开头填写 **`@<软件包名>/<软件名称>`** 来指定该规则对应软件；
之后每行一个文件夹路径或文件路径，初始目录为该 **App** 的数据目录。

模块会自动查找该包名对应应用数据目录，软件名称将显示在清理界面

软件/终端清理页面会根据配置文件动态构建

请不要在规则中以根目录 **`/xxx`** 硬编码编写清理规则，否则将导致清理报错并跳过此规则文件。

模块会自动检查部分配置错误





### **7**：清空系统缓存

清理系统软件缓存、系统缓存、附带清空 **MTP** 主机数据(可解决 **MTP** 文件传输文件列表显示异常问题





### **8**：自动清理
CRON自动功能设置。





### **9**：阻止所有软件更新安装
如名，阻止所有往 **`/data/app`** 安装软件的行为





### **10**：内部储存固定功能
如名，锁定内部储存根目录布局防止软件乱拉*（创建文件/文件夹）





### **11**：阻止缓存功能
这是模块的一个重要功能，用于动态阻止前台软件生成缓存。

打开该功能后重启激活，自动缓存前台最近2款软件并阻止缓存，可
自定义添加白名单。

名单位置： **`/data/adb/wipe_cache/whitelist.prop`** 或在模块 **ClearBox** 软件中添加。

**Other**：模块采取每10S更新的方式，一方面避免持续资源占用，一方面部分软件在阻止缓存状态下启动会异常，进入软件后延迟启动阻止缓存是最优解。

阻止缓存不会清空该软件缓存，因此软件缓存不会为 **0**，而是缓慢增长，此举避免不断进行小文件擦除而仅仅限制大缓存生成

屏幕关闭自动延迟运行

部分软件出现异常请自行添加白名单！





### **12**：磁铁（一键归类文件

一键归类内/多外部储存文件，规则与文件清理共用





### **13**：磁盘 & 软件优化

这是一个优化功能集，包含磁盘优化（ **f2fs-GC** ）及 **Dexoat** （软件预编译）功能


**F2fs** 磁盘 **GC**，此功能属于紧急 **GC**，因此不需要经常使用，定期运行即可。
方案来自 **Coolapk@Amktiao** 大佬，已得到同意，感谢大佬！


**Dexoat** 软件预编译，即提前编译软件加速运行时速度，缺点是占用储存空间，属于以空间电量换流畅操作（）
模块预提供了两个模式，三个选项：系统默认 **Dexoat** 及自定义编译模式：

系统默认 **Dexoat** ： **Android** 系统（特别是较新系统）也会在空闲时自动编译部分热点函数以提高整体运行速度，因此模块提供了系统 **Dexoat** 模式，此模式等于手动触发系统 **Dexoat**，模式及编译项由系统决定。

自定义编译模式：此模式支持手动指定编译模式，目前支持 **Speed**、**Speed-profile**、**Everything** 三个模式





> 模块 **ClearBox App** 使用 [**Kr-Script**](https://github.com/helloklf/kr-scripts) 项目制作而成，感谢该项目


> 模块内测请前往
>[**ClearBox**](https://yhfx.jwznb.com/share?key=yigOTedUjh62&ts=1747355950)
>[更多玩机交流](https://yhfx.jwznb.com/share?key=TihFLlAj6ZJ9&ts=1740281856)


> *此 **README** 以最新 **Debug** 版本为准
